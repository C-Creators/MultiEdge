---
// Simple ROI Calculator Component
---

<section id="calculator" class="calculator-section">
  <div class="container">
    <div class="section-head reveal">
      <div>
        <div class="kicker">
          <i data-lucide="calculator" style="width:16px;height:16px"></i>
          <span data-i18n="calculator.kicker">ROI CALCULATOR</span>
        </div>
        <h3 data-i18n="calculator.title">Estimate Your Returns</h3>
      </div>
      <p data-i18n="calculator.description">
        Our bot generates 3-10% monthly returns. Enter your investment to see potential results.
      </p>
    </div>

    <div class="calc-card reveal">
      <div class="calc-body">
        <!-- Investment Input -->
        <div class="calc-input-section">
          <label for="calcPrincipal" data-i18n="calculator.investmentLabel">Your investment</label>
          <div class="calc-input-wrapper">
            <span class="calc-currency-symbol" id="calcSymbol">$</span>
            <input id="calcPrincipal" type="number" min="100" step="100" placeholder="1000" value="1000" />
          </div>
          <div class="calc-currency-toggle">
            <button type="button" class="currency-btn active" data-currency="USD">USD</button>
            <button type="button" class="currency-btn" data-currency="EUR">EUR</button>
          </div>
        </div>

        <!-- Period Selection -->
        <div class="calc-period-section">
          <label data-i18n="calculator.periodLabel">Investment period</label>
          <div class="calc-period-buttons">
            <button type="button" class="period-btn" data-months="6">
              <span class="period-value">6</span>
              <span class="period-unit" data-i18n="calculator.monthsLabel">months</span>
            </button>
            <button type="button" class="period-btn active" data-months="12">
              <span class="period-value">1</span>
              <span class="period-unit" data-i18n="calculator.yearLabel">year</span>
            </button>
            <button type="button" class="period-btn" data-months="24">
              <span class="period-value">2</span>
              <span class="period-unit" data-i18n="calculator.yearsLabel">years</span>
            </button>
          </div>
        </div>

        <!-- Results -->
        <div class="calc-results">
          <div class="calc-result conservative">
            <div class="result-header">
              <span class="result-icon">üõ°Ô∏è</span>
              <span class="result-title" data-i18n="calculator.conservative">Conservative</span>
              <span class="result-rate">3% <span data-i18n="calculator.perMonth">/month</span></span>
            </div>
            <div class="result-value" id="resultConservative">$1,000</div>
            <div class="result-profit" id="profitConservative">+$0 profit</div>
          </div>
          
          <div class="calc-result average highlight">
            <div class="result-header">
              <span class="result-icon">‚öñÔ∏è</span>
              <span class="result-title" data-i18n="calculator.average">Average</span>
              <span class="result-rate">6.5% <span data-i18n="calculator.perMonth">/month</span></span>
            </div>
            <div class="result-value" id="resultAverage">$1,000</div>
            <div class="result-profit" id="profitAverage">+$0 profit</div>
          </div>
          
          <div class="calc-result optimistic">
            <div class="result-header">
              <span class="result-icon">üöÄ</span>
              <span class="result-title" data-i18n="calculator.optimistic">Optimistic</span>
              <span class="result-rate">10% <span data-i18n="calculator.perMonth">/month</span></span>
            </div>
            <div class="result-value" id="resultOptimistic">$1,000</div>
            <div class="result-profit" id="profitOptimistic">+$0 profit</div>
          </div>
        </div>

        <!-- Disclaimer -->
        <div class="calc-disclaimer">
          <i data-lucide="info" style="width:16px;height:16px"></i>
          <p data-i18n="calculator.disclaimer">
            These are projections based on historical performance. Actual results may vary. Past performance does not guarantee future results.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const els = {
      principal: document.getElementById('calcPrincipal') as HTMLInputElement,
      symbol: document.getElementById('calcSymbol')!,
      resultConservative: document.getElementById('resultConservative')!,
      resultAverage: document.getElementById('resultAverage')!,
      resultOptimistic: document.getElementById('resultOptimistic')!,
      profitConservative: document.getElementById('profitConservative')!,
      profitAverage: document.getElementById('profitAverage')!,
      profitOptimistic: document.getElementById('profitOptimistic')!,
    };

    let currency = 'USD';
    let months = 12;

    const symbol = () => currency === 'USD' ? '$' : '‚Ç¨';

    const fmtMoney = (n: number) => {
      return symbol() + new Intl.NumberFormat('en-US', { 
        maximumFractionDigits: 0, 
        minimumFractionDigits: 0 
      }).format(Math.round(n));
    };

    const getLang = () => document.documentElement.getAttribute('data-lang') || 'en';
    const profitLabel = () => getLang() === 'es' ? 'ganancia' : 'profit';

    function calculate() {
      const P = Math.max(0, parseFloat(els.principal.value || '0'));
      
      // Monthly rates
      const rateConservative = 0.03; // 3%
      const rateAverage = 0.065;     // 6.5%
      const rateOptimistic = 0.10;   // 10%

      // Compound interest: P * (1 + r)^n
      const endConservative = P * Math.pow(1 + rateConservative, months);
      const endAverage = P * Math.pow(1 + rateAverage, months);
      const endOptimistic = P * Math.pow(1 + rateOptimistic, months);

      // Update UI
      els.symbol.textContent = symbol();
      
      els.resultConservative.textContent = fmtMoney(endConservative);
      els.resultAverage.textContent = fmtMoney(endAverage);
      els.resultOptimistic.textContent = fmtMoney(endOptimistic);

      els.profitConservative.textContent = `+${fmtMoney(endConservative - P)} ${profitLabel()}`;
      els.profitAverage.textContent = `+${fmtMoney(endAverage - P)} ${profitLabel()}`;
      els.profitOptimistic.textContent = `+${fmtMoney(endOptimistic - P)} ${profitLabel()}`;
    }

    // Currency buttons
    document.querySelectorAll('.currency-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.currency-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currency = (btn as HTMLElement).dataset.currency || 'USD';
        calculate();
      });
    });

    // Period buttons
    document.querySelectorAll('.period-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        months = parseInt((btn as HTMLElement).dataset.months || '12');
        calculate();
      });
    });

    // Input event
    els.principal.addEventListener('input', calculate);

    // Initial calculation
    calculate();
  });
</script>

<style>
  .calculator-section {
    padding: 60px 0;
  }

  .calc-card {
    background: var(--card);
    border: 1px solid var(--stroke);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow);
    overflow: hidden;
    backdrop-filter: blur(12px);
    max-width: 700px;
    margin: 0 auto;
  }

  .calc-body {
    padding: 32px;
  }

  @media (max-width: 520px) {
    .calc-body {
      padding: 24px 20px;
    }
  }

  /* Input Section */
  .calc-input-section {
    margin-bottom: 28px;
  }

  .calc-input-section label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .calc-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }

  .calc-currency-symbol {
    position: absolute;
    left: 18px;
    font-size: 20px;
    font-weight: 700;
    color: var(--muted);
  }

  .calc-input-wrapper input {
    width: 100%;
    padding: 18px 18px 18px 44px;
    background: var(--card2);
    border: 2px solid var(--stroke);
    border-radius: var(--radius-lg);
    color: var(--text);
    font-size: 24px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    outline: none;
    transition: border-color 0.15s, box-shadow 0.15s;
  }

  .calc-input-wrapper input:focus {
    border-color: var(--brand);
    box-shadow: var(--focus);
  }

  .calc-currency-toggle {
    display: flex;
    gap: 8px;
    margin-top: 12px;
  }

  .currency-btn {
    padding: 8px 16px;
    background: var(--card2);
    border: 1px solid var(--stroke);
    border-radius: var(--radius-md);
    color: var(--muted);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
  }

  .currency-btn:hover {
    background: var(--bg);
    border-color: var(--stroke2);
  }

  .currency-btn.active {
    background: linear-gradient(135deg, var(--brand), var(--brand2));
    border-color: transparent;
    color: var(--bg);
  }

  /* Period Section */
  .calc-period-section {
    margin-bottom: 28px;
  }

  .calc-period-section label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .calc-period-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }

  .period-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px 12px;
    background: var(--card2);
    border: 2px solid var(--stroke);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.15s;
  }

  .period-btn:hover {
    background: var(--bg);
    border-color: var(--stroke2);
  }

  .period-btn.active {
    background: linear-gradient(135deg, rgba(196, 233, 174, 0.15), rgba(196, 233, 174, 0.05));
    border-color: var(--brand);
  }

  .period-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
    line-height: 1;
  }

  .period-btn.active .period-value {
    color: var(--brand);
  }

  .period-unit {
    font-size: 12px;
    font-weight: 500;
    color: var(--muted);
    margin-top: 4px;
  }

  /* Results */
  .calc-results {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-bottom: 24px;
  }

  @media (max-width: 600px) {
    .calc-results {
      grid-template-columns: 1fr;
    }
  }

  .calc-result {
    padding: 20px 16px;
    background: var(--card2);
    border: 1px solid var(--stroke);
    border-radius: var(--radius-lg);
    text-align: center;
  }

  .calc-result.highlight {
    background: linear-gradient(135deg, rgba(196, 233, 174, 0.12), rgba(196, 233, 174, 0.04));
    border-color: rgba(196, 233, 174, 0.3);
    position: relative;
  }

  .result-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    margin-bottom: 12px;
  }

  .result-icon {
    font-size: 20px;
  }

  .result-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .result-rate {
    font-size: 11px;
    color: var(--muted);
    font-weight: 500;
  }

  .result-value {
    font-size: 28px;
    font-weight: 800;
    color: var(--brand);
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.5px;
  }

  .calc-result.highlight .result-value {
    font-size: 32px;
  }

  .result-profit {
    margin-top: 8px;
    font-size: 13px;
    font-weight: 600;
    color: var(--muted);
  }

  /* Disclaimer */
  .calc-disclaimer {
    display: flex;
    gap: 12px;
    padding: 14px 16px;
    background: rgba(201, 162, 39, 0.08);
    border: 1px solid rgba(201, 162, 39, 0.20);
    border-radius: var(--radius-md);
  }

  .calc-disclaimer i {
    flex-shrink: 0;
    color: #c9a227;
  }

  .calc-disclaimer p {
    margin: 0;
    font-size: 12px;
    line-height: 1.5;
    color: var(--muted);
  }

  /* Dark mode */
  [data-theme="dark"] .currency-btn.active,
  [data-theme="dark"] .period-btn.active .period-value {
    color: #0b1415;
  }

  [data-theme="dark"] .currency-btn.active {
    color: var(--bg);
  }
</style>
